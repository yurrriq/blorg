#+STARTUP: showall
#+OPTIONS: toc:nil ^:{}
#+BEGIN_HTML
---
title:  "Spooky Security"
author: Eric Bailey
tags: darwin, keyboard, security, skhd, chunkwm
---
#+END_HTML

I've been using [[https://koekeishiya.github.io/chunkwm/][chunkwm]] and [[https://github.com/koekeishiya/skhd][skhd]] to help make Darwin more palatable, but ~skhd~
suddenly stopped working. When I try to start it manually, I get the following
error.

#+BEGIN_QUOTE
skhd: secure keyboard entry is enabled! abort..
#+END_QUOTE

[[https://github.com/koekeishiya/skhd/issues/48][The internet suggested]] I disable [[https://iterm2.com/][iTerm 2]]'s /Secure Keyboard Entry/, but I've
switched to [[https://sw.kovidgoyal.net/kitty/][kitty]].

After some further frantic [[https://duckduckgo.com/][DuckDuckGo]]-ing, I came across a function,
=DisableSecureEventInput=, which seemed like the answer, so I wrote a quick
program to call it and try to end my troubles.

#+BEGIN_SRC c :tangle ../../hakyll/code/fix-skhd.c
#include <Carbon/Carbon.h>


int main(int argc, const char *argv[])
{
    if (IsSecureEventInputEnabled())
	printf("Secure keyboard entry is enabled.\n");

    DisableSecureEventInput();

    if (IsSecureEventInputEnabled())
	printf("Secure keyboard entry is still enabled.\n");


    return 0;
}
#+END_SRC


#+BEGIN_SRC sh :exports results :results output :dir ../../hakyll/code
/usr/bin/gcc -framework Carbon -o fix-skhd ./fix-skhd.c
./fix-skhd
#+END_SRC

#+RESULTS:
: Secure keyboard entry is enabled.
: Secure keyboard entry is still enabled.

No such luck. I'm [[https://www.youtube.com/watch?v%3DqjGjuiFKE04][literally dying]].
